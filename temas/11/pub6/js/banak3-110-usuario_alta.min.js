function UAIsoPais(){var a="";switch(document.getElementById("ua-pais").value){case"001":a="ES";break;case"002":a="DE";break;case"007":a="FR";break;case"011":a="IT";break;case"013":a="PT";break;case"114":a="PL"}return a}function UACambioCodPostal(a){var o=document.getElementById("ua-pais").value,e=document.getElementById(a).value;switch(a){case"ua-codpostal":var i="#ua-localidad",t="#ua-otralocal-div",r="#ua-provincia";break;case"ua-enviocodpostal":var i="#ua-enviolocalidad",t="#ua-enviootralocal-div",r="#ua-envioprovincia";break;default:return}$.ajax({url:"/usuario_alta.validar.php",global:!0,type:"GET",timeout:1e4,data:{codpais:o,codpostal:e,cambio:e},dataType:"json",async:!1,success:function(a){$.each(a,function(a,o){"localidades"==a&&($localidad=$(i),$localidad.empty(),$localidad.removeAttr("disabled"),$.each(o,function(a,o){$localidad.append($("<option></option>").attr("value",o).text(o))}),$(t).hide()),"otralocalidad"==a&&($localidad=$(i),$localidad.append($("<option></option>").attr("value","otro").text(o))),"provincia"==a&&($provincia=$(r),$provincia.empty(),$provincia.removeAttr("disabled"),$.each(o,function(a,o){$.each(o,function(a,o){$provincia.append($("<option></option>").attr("value",a).text(o))})}))})}})}function UACambioLocalidad(a){var o=document.getElementById(a).value;switch(a){case"ua-localidad":var e="#ua-otralocal-div",i="#ua-otralocalidad";break;case"ua-enviolocalidad":var e="#ua-enviootralocal-div",i="#ua-enviootralocalidad";break;default:return}"otro"==o?($(e).show(),$(i).attr("required",!0)):($(e).hide(),$(i).removeAttr("required"))}function UACambioMismosDatos(a){switch(a){case"ua-mismosdatos-si":$("#alta_entrega").slideUp("slow"),$("#ua-envionombre").removeAttr("required"),$("#ua-envioapellidos").removeAttr("required"),$("#ua-envioemail").removeAttr("required"),$("#ua-enviocodpostal").removeAttr("required"),$("#ua-enviolocalidad").removeAttr("required"),$("#ua-envioprovincia").removeAttr("required"),$("#ua-enviodomicilio").removeAttr("required"),$("#ua-enviotelefono").removeAttr("required");break;case"ua-mismosdatos-no":$("#alta_entrega").slideDown("slow"),$("#ua-envionombre").attr("required",!0),$("#ua-envioapellidos").attr("required",!0),$("#ua-envioemail").attr("required",!0),$("#ua-enviocodpostal").attr("required",!0),$("#ua-enviolocalidad").attr("required",!0),$("#ua-envioprovincia").attr("required",!0),$("#ua-enviodomicilio").attr("required",!0),$("#ua-enviotelefono").attr("required",!0)}}function UAGuardaStorage(a){var o=$("#"+a).val();""!=o?sessionStorage.setItem(a,o):sessionStorage.removeItem(a);var e="";switch(a){case"ua-mismosdatos-no":var e="ua-mismosdatos-si";break;case"ua-mismosdatos-si":var e="ua-mismosdatos-no";break;case"ua-fidelizacion-no":var e="ua-fidelizacion-si";break;case"ua-fidelizacion-si":var e="ua-fidelizacion-no"}""!=e&&sessionStorage.removeItem(e)}function UARecuperaStorage(a){var o=sessionStorage.getItem(a);if(null!=o){var e=$("#"+a),i=e.attr("type");switch(e.val(o),("text"==i||"email"==i)&&e.text(o),("checkbox"==i||"radio"==i)&&e.attr("checked",!0),a){case"ua-codpostal":case"ua-enviocodpostal":UACambioCodPostal(a);break;case"ua-localidad":case"ua-enviolocalidad":UACambioLocalidad(a);break;case"ua-mismosdatos-no":case"ua-mismosdatos-si":UACambioMismosDatos(a)}}}function UAGraba(){var a="/usuario_alta.grabar.php",o=$("#ua-formulario").serialize();BanakAjaxMensaje(a,o)}!function(a){a(function(){a("#ua-pais").each(function(){UARecuperaStorage(a(this).attr("id"))}),a("#ua-formulario input:not(:password)").each(function(){UARecuperaStorage(a(this).attr("id"))}),a("#ua-formulario select:not(#ua-pais)").each(function(){UARecuperaStorage(a(this).attr("id"))})}),a(function(){a("#ua-formulario input:not(:password), #ua-formulario select").each(function(){a(this).on("blur",function(){UAGuardaStorage(a(this).attr("id"))})}),a("#ua-codpostal, #ua-enviocodpostal").on("change",function(){UACambioCodPostal(a(this).attr("id"))}),a("#ua-localidad, #ua-enviolocalidad").on("change",function(){UACambioLocalidad(a(this).attr("id"))}),a("#ua-mismosdatos-si, #ua-mismosdatos-no").on("click",function(){UACambioMismosDatos(a(this).attr("id"))})})}(jQuery);